<html>
<head>
    <meta xmlns="http://www.w3.org/1999/xhtml"
          http-equiv="Content-Type"
          content="text/html; charset=utf-8"/>
    <meta charset="UTF-8">
    <title>Ionic App</title>
    <meta name="viewport"
          content="width=device-width,
          initial-scale=1.0,
          minimum-scale=1.0,
          maximum-scale=1.0,
          user-scalable=no">
    <meta name="format-detection"
          content="telephone=no">
    <meta name="msapplication-tap-highlight"
          content="no">

    <meta http-equiv="Content-Security-Policy"
          content="default-src * 'self' cdvfile: gap: 'unsafe-eval';
          img-src * 'self' cdvfile: data:;
          style-src   * 'self' 'unsafe-inline' 'unsafe-eval';
          script-src  * 'self' 'unsafe-inline' 'unsafe-eval';
          child-src   * 'self' 'unsafe-inline' 'unsafe-eval' gap:;
          media-src *;"/>

    <title> js图片上传测试 </title>
    <script Type='text/javascript'>
        //上传完文件后回调
        //function AddFile(fileInfo){
        //   alert('上传的文件信息'+fileInfo);
        //}
        
        //打开手机文件浏览器上传文件
        function openPhoneFileChooser(fileInfo){
            window.location.href="phonefun://fileUpLoad";
        }
        //显示提交按钮
        function showSubmitButton(){
            window.location.href="phonefun://showSubmitButton";
        }
        //隐藏提交按钮
        function hiddeSubmitButton(){
            window.location.href="phonefun://hiddeSubmitButton";
        }
        
        function upLoadFileCallBack(fileMsg) {
            alert(fileMsg);
        }

        function upLoadFileChooser() {
            //Android
            if (/(Android)/i.test(navigator.userAgent)) {
                //alert(navigator.userAgent);
                window.WebFragment.upLoadFileChoose('upLoadFileCallBack');
            }
//            //IOS
//            else if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) {
//                //alert(navigator.userAgent);
//                window.location.href="phonefun://fileUpLoad";
//            }
//            //PC
//            else {
//
//            }
        }
    
    </script>
</head>
<body style="overflow-x: auto">
    <!--onLoad="showSubmitButton()"-->
    <h1> OC与JS交互 </h1>
    <h2> 测试自定义协议 </h2>
    <!-- 自定义协议与OC交付 -->
    <a href="phonefun://fileUpLoad">点击上传文件</a>
    <br/>
    <br/>
    <a href="phonefun://hiddeSubmitButton">点击隐藏提交按钮</a>
    <br/>
    <br/>
    <a href="phonefun://showSubmitButton">点击显示提交按钮</a>
    <br/>
    <br/>
    <div>
        <input type="file" accept="image/*"/>
        <button onclick="window.WebFragment.toastShowResposeMsg('upLoadFileCallBack')">js调用native接口：显示Toast</button>
        <button onclick="upLoadFileChooser()">js调用native接口：上传文件</button>
    </div>

        <select>
            <option value="1"></option>
            <option value="2"></option>
            <option value="3"></option>
            <option value="4"></option>
            <option value="5"></option>
        </select>

    <!--    <script type="text/javascript">-->
<!--        document.write("<h1>Hello World!</h1>");-->
<!--        showSubmitButton();-->
<!--    </script>-->
    <div style ="width: 100%;
                 height: 100%;
                -webkit-overflow-scrolling: touch;
                overflow-y: scroll;
                overflow-x: scroll;">
        <iframe
            id="openWindowIframe"
            name="openWindowIframe"
            frameborder="1"
            style="width: 100%; height: 100%; padding: 2px;
                    overflow-y: scroll;
                    overflow-x: scroll;"
            data-tap-disabled="true"
            sandbox="allow-scripts
                allow-top-navigation
                allow-pointer-lock
                allow-same-origin
                allow-popups
                allow-forms"
            src="http://218.201.212.146/CI"></iframe>
    </div>
</body>
</html>